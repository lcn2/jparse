.\" section 1 man page for jparse
.\"
.\" This man page was first written by Cody Boone Ferguson for the IOCCC
.\" in 2022.
.\"
.\" Humour impairment is not virtue nor is it a vice, it's just plain
.\" wrong: almost as wrong as JSON spec mis-features and C++ obfuscation! :-)
.\"
.\" "Share and Enjoy!"
.\"     --  Sirius Cybernetics Corporation Complaints Division, JSON spec department. :-)
.\"
.TH jparse 1 "14 July 2023" "jparse" "jparse tools"
.SH NAME
.B jparse
\- IOCCC JSON parser
.SH SYNOPSIS
.B jparse
.RB [\| \-h \|]
.RB [\| \-v
.IR level \|]
.RB [\| \-J \|
.IR level \|]
.RB [\| \-q \|]
.RB [\| \-V \|]
.RB [\| \-s \|]
.I arg
.SH DESCRIPTION
.B jparse
parses a block of JSON text either from a file
.RB \|( \-
means
.BR stdin \|)
or a string passed to the program via the
.B \-s
option, reporting if it is valid or invalid JSON.
Depending on the JSON verbosity level it will also show more information.
This tool by itself is useful to validate JSON but the
.BR jparse (3)
API is much more useful in general as it allows for one to actually do things with the JSON.
.PP
.SH OPTIONS
.TP
.B \-h
Show help and exit.
.TP
.BI \-v\  level
Set verbosity level to
.IR level
(def: 0).
.TP
.BI \-J\  level
Set JSON verbosity level to
.IR level
(def: 0).
.TP
.B \-q
Suppresses some of the output (def: not quiet).
.TP
.B \-V
Show version and exit.
.TP
.B \-s
Parse argument as a string.
.SH EXIT STATUS
.TP
0
valid JSON
.TQ
1
invalid JSON
.TQ
2
.B \-h
or
.B \-V
used and help string or version string printed.
.TQ
3
command line error
.TQ
>=4
internal error
.SH NOTES
.PP
This JSON parser was written as a collaboration between Cody Boone Ferguson and Landon Curt Noll, one of the IOCCC Judges, to support
IOCCCMOCK, IOCCC28 and beyond.
.PP
For more detailed history that goes beyond this humble man page we recommend you check
.BR jparse (1),
.IR CHANGES.md ,
.IR README.md ,
the GitHub git log as well as reading the source code (or not :\-) ).
Understand that by source we refer to the
.I jparse.l
and
.I jparse.y
files as well as files not generated by
.BR flex (1)
and
.BR bison (1)\c
\&: we do NOT recommend you read the generated code!
This is because doing so is might give you nightmares and cause other horrible symptoms. :-)
See the apology at the top of the generated files or look directly at \fIsorry.tm.ca.h\fP instead for a warning and apology.
.PP
We don't recommend you check the GitHub issue page! :\-)
This is because it's incredibly long with a lot of OT things and would take even the fastest readers a very long time to read. :\-(
.SS Valid JSON
.PP
In the case that a value cannot be converted but it is valid JSON the tool will report that it's valid JSON but it will warn that it could not be converted.
This could happen if, for example, a number is too big for the C types.
As long as the JSON is entirely valid the tool will exit 0.
.SH BUGS
.PP
Although error reporting does have locations it is only line numbers and columns.
Additionally the column can be misleading because of characters that take up more than one column but are counted as just one (tabs for example).
.PP
Although the scanner and parser are re-entrant only one parse at one time in a process has been tested.
The testing of more than one parse at the same time is way out of scope of this repo but will be tested more as I move this to a separate repo.
.PP
If it's not clear this means that having more than one parse active in the same process at the same time is not tested so even though it should be okay there might be some issues that have yet to be discovered.
.SH EXAMPLES
.PP
Parse the JSON string
.BR {\ "test_mode"\ :\ false\ } :
.sp
.RS
.B ./jparse \-s '{ "test_mode" : false }'
.RE
.PP
Parse input from
.B stdin
(send
.BR EOF ,
usually ctrl\-d or
.BR ^D ,
to parse):
.sp
.RS
.ft B
 ./jparse \-
.br
 []
.br
 ^D\fP
.br
.fi
.RE
.PP
Parse just a negative number:
.PP
.RS
.B ./jparse \-s \-\- \-5
.RE
.PP
Parse
.I .info.json
file:
.sp
.RS
.ft B
 ./jparse .info.json
.ft R
.RE
.PP
Run the
.B jparse_test.sh
script using the default
.I json_teststr.txt
file with verbosity set at 5:
.PP
.RS
.ft B
 ./jparse_test.sh \-v 5
.ft R
.RE
.SH SEE ALSO
.PP
.BR jparse (1),
.BR jstrencode (1),
.BR jstrdecode (1),
.BR flex (1),
.BR bison (1)
